--- RELEASE NOTES - 01-August-2022 ---

-- PRE-DEPLOYMENT STEPS --

1. Take backup.
2. Turn off the Email Deliverability.
3. Enable Chat
    a. Go to Setup
    b. Quick find Chat Settings
    c. Enable Chat
    d. Save
4. Check if there's atleast one Organization-Wide Addresses created in the org.
5. Go to Setup > Digital Experiences > Settings and select Allow using standard external profiles for self-registration, user creation, and login.
6. Make sure the Admin has the Role assgined.


-- DEPLOYMENT --

1. For WINDOWS
    a. sfdx force:source:convert --rootdir force-app --outputdir delmarpackage
    b. jar -cfM zippackage.zip delmarpackage
    c. rmdir /s delmarpackage
    d. sfdx force:mdapi:deploy --zipfile zippackage.zip --checkonly --testlevel RunSpecifiedTests --runtests DEL_CaseCollaborationControllerTest,DEL_CaseCollaborationTriggerHelperTest,DEL_CaseCommentTriggerHelperTest,DEL_ContactCollaborationControllerTest,DEL_ContentDocumentLinkTriggerTest,DEL_EmailMessagesTriggerHelperTest,DEL_UtilsTest
2. For MAC
    a. sfdx force:source:convert --rootdir force-app --outputdir delmarpackage
    b. zip -r zippackage.zip delmarpackage
    c. rm -r delmarpackage
    d. sfdx force:mdapi:deploy --zipfile zippackage.zip --checkonly --testlevel RunSpecifiedTests --runtests DEL_CaseCollaborationControllerTest,DEL_CaseCollaborationTriggerHelperTest,DEL_CaseCommentTriggerHelperTest,DEL_ContactCollaborationControllerTest,DEL_ContentDocumentLinkTriggerTest,DEL_EmailMessagesTriggerHelperTest,DEL_UtilsTest
    e. rm -r zippackage.zip


-- POST-DEPLOYMENT STEPS --

1. Place the component del_commentsCollaborationComponent under Community and Service Cloud Case Record Page
    - Update Record Id property on the componet - {!recordId}
2. Place the component del_addCaseCollaboratorComponent under the Communnity page.
    - Update Record Id property on the componet - {!recordId}
3. Create a Default Organization Level Value in the Email Alert Configuration custom setting.(Run the script below in anonymous window)
4. Check Apex Class access under the Profile Customer Community Plus Login User
    - DEL_CaseCollabaoratorUtility
    - DEL_CaseCollaborationController
    - DEL_CaseCollaborationTriggerHelper
    - DEL_CaseCommentTriggerHelper
    - DEL_ContactCollaborationController
    - DEL_ContentDocumentLinkTriggerHelper
    - DEL_EmailMessagesTriggerHelper
    - DEL_Utils
    - DEL_AsyncCaseCommentEmailAlerts
5. Turn on the Email Deliverability.


/********************************************************************
* Script to create Email Alert Configuration custom setting

DEL_CaseCollaborationConfiguration__c objCaseCollaborationConfiguration = new DEL_CaseCollaborationConfiguration__c();
objCaseCollaborationConfiguration.MergeFields__c = '{!Case.Subject},{!Case.CaseNumber},{!Case.Description},{!CaseComment.CommentCreatedName__c},{!CaseComment.Body__c},{!CaseComment.CreatedDate},SiteLink';
objCaseCollaborationConfiguration.CaseQueryFields__c = 'Subject,CaseNumber,Description';
objCaseCollaborationConfiguration.SiteName__c = '';
objCaseCollaborationConfiguration.CaseCommentEmailTemplateEnglish__c = 'DEL_CaseCommentEmailTemplateEnglish';
objCaseCollaborationConfiguration.CaseCommentsEmailTemplateSpanish__c = 'DEL_CaseCommentEmailTemplateSpanish';
objCaseCollaborationConfiguration.CaseCommentsEmailTemplateFrench__c = 'DEL_CaseCommentEmailTemplateFrench';
objCaseCollaborationConfiguration.OrgWideAddress__c = '';
insert objCaseCollaborationConfiguration;

*********************************************************************/